<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>산업혁명 시대 아동 노동자 시뮬레이션</title>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const Heart = () => <svg className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fillRule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clipRule="evenodd" /></svg>;
        const Zap = () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>;
        const Coins = () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>;
        const Clock = () => <svg className="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>;
        const Users = () => <svg className="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" /></svg>;
        const AlertCircle = () => <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fillRule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clipRule="evenodd" /></svg>;

        const IndustrialChildLaborGame = () => {
          const [gameState, setGameState] = useState('intro');
          const [character, setCharacter] = useState(null);
          const [stamina, setStamina] = useState(100);
          const [mentality, setMentality] = useState(100);
          const [money, setMoney] = useState(0);
          const [day, setDay] = useState(1);
          const [popup, setPopup] = useState(null);

          const characters = {
            tom: {
              name: 'Tom',
              age: 10,
              job: 'Knotter (매듭공)',
              workplace: '방직공장',
              description: '실을 정리하고 엉킨 매듭을 푸는 일을 합니다. 하루 종일 서서 빠르게 움직이는 실을 다루어야 합니다.',
              family: '아버지는 탄광에서 다쳤고, 어머니는 세탁 일을 합니다. Tom보다 한 살 많은 형 Brad는 런던에서 굴뚝 청소부로 일합니다. Tom이 방적 공장에서 벌어오는 돈의 액수가 오늘 저녁 식사를 결정합니다.',
              color: 'bg-blue-600'
            },
            mary: {
              name: 'Mary',
              age: 9,
              job: 'Piecer (연결공)',
              workplace: '방직공장',
              description: '끊어진 실을 연결하는 일을 합니다. 위험하게 돌아가는 기계 사이로 손을 넣어 작업해야 합니다.',
              family: '아버지는 농장에서 일용직으로 일하고, 어머니는 부잣집에서 하녀로 일합니다. 동생들은 아직 너무 어려서 일을 할 수 없습니다. Mary가 방직 공장에서 열심히 일을 해서 돈을 벌어야만 동생들이 저녁 식사를 할 수 있습니다.',
              color: 'bg-pink-600'
            },
            ann: {
              name: 'Ann',
              age: 6,
              job: '성냥 제조공',
              workplace: '성냥 공장',
              description: '나뭇가지를 인산(백린)에 담가 성냥개비를 만드는 일을 합니다. 독성 물질에 자주 노출됩니다.',
              family: '4살 때 부모님이 돌아가셔서 Ann을 보호해 줄 어른이 없습니다. 2살 어린 여동생과 함께 공장 기숙사에서 숙식을 해결합니다.',
              color: 'bg-green-600'
            }
          };

          const checkGameOver = (newStamina, newMentality) => {
            if (newStamina <= 0 || newMentality <= 0) {
              setGameState('death-ending');
              return true;
            }
            return false;
          };

          const Popup = ({ content, button, onClose }) => (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
              <div className="bg-white rounded-lg p-6 max-w-md w-full shadow-2xl">
                <div className="mb-4">{content}</div>
                <button
                  onClick={onClose}
                  className="w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 transition-colors font-bold"
                >
                  {button}
                </button>
              </div>
            </div>
          );

          const Stats = () => (
            <div className="bg-gradient-to-r from-gray-800 to-gray-900 p-4 rounded-lg mb-4 shadow-lg">
              <div className="flex justify-between items-center mb-2">
                <span className="text-white font-bold text-lg">{character ? characters[character].name : ''}</span>
                <span className="text-gray-300">Day {day}/7</span>
              </div>
              <div className="grid grid-cols-3 gap-3">
                <div className="flex items-center text-white">
                  <Heart />
                  <div className="flex-1 ml-2">
                    <div className="text-xs text-gray-300">체력</div>
                    <div className="bg-gray-700 rounded-full h-2 mt-1">
                      <div className={`h-2 rounded-full transition-all ${stamina > 50 ? 'bg-green-400' : 'bg-red-400'}`} style={{width: `${Math.max(0, stamina)}%`}}></div>
                    </div>
                  </div>
                </div>
                <div className="flex items-center text-white">
                  <Zap />
                  <div className="flex-1 ml-2">
                    <div className="text-xs text-gray-300">정신력</div>
                    <div className="bg-gray-700 rounded-full h-2 mt-1">
                      <div className={`h-2 rounded-full transition-all ${mentality > 50 ? 'bg-blue-400' : 'bg-purple-400'}`} style={{width: `${Math.max(0, mentality)}%`}}></div>
                    </div>
                  </div>
                </div>
                <div className="flex items-center text-white">
                  <Coins />
                  <div className="flex-1 ml-2">
                    <div className="text-xs text-gray-300">수입</div>
                    <div className={`text-sm font-bold mt-1 ${money < 0 ? 'text-red-400' : 'text-yellow-300'}`}>{money} 펜스</div>
                  </div>
                </div>
              </div>
            </div>
          );

          const makeChoice = (choice) => {
            // General choices and character-specific flows
            if (choice === 'late') {
              const newStamina = stamina - 10;
              const newMoney = money - 2;
              const newMentality = mentality - 20;
              setStamina(newStamina);
              setMoney(newMoney);
              setMentality(newMentality);
              if (!checkGameOver(newStamina, newMentality)) {
                setPopup({
                  content: <p className="text-gray-700">지각을 했습니다. 임금이 2펜스 삭감되었습니다.</p>,
                  button: '슬프지만 어쩔 수 없지.',
                  onClose: () => {
                    setPopup(null);
                    setGameState('work-speed-choice');
                  }
                });
              }
            } else if (choice === 'ontime') {
              const newStamina = stamina - 20;
              setStamina(newStamina);
              if (!checkGameOver(newStamina, mentality)) {
                setGameState('work-speed-choice');
              }
            } else if (choice === 'pretend-sick') {
              const newStamina = stamina - 20;
              const newMoney = money - 2;
              const newMentality = mentality - 20;
              setStamina(newStamina);
              setMoney(newMoney);
              setMentality(newMentality);
              if (!checkGameOver(newStamina, newMentality)) {
                setPopup({
                  content: (
                    <div className="text-gray-700">
                      <p className="mb-2">감독관이 다가와 {characters[character].name}을(를) 살펴봅니다.</p>
                      <p className="mb-2">"꾀병 부리는 거 다 알아! 게으른 녀석!"</p>
                      <p className="font-bold text-red-600">감독관이 {characters[character].name}을(를) 때렸습니다.</p>
                      <p className="mt-2 text-sm">체력 -20, 임금 -2펜스, 정신력 -20</p>
                    </div>
                  ),
                  button: '아파서 눈물이 난다...',
                  onClose: () => {
                    setPopup(null);
                    setGameState('work-speed-choice');
                  }
                });
              }
            } else if (choice === 'fast' || choice === 'safe') {
              // Work speed choices: if Ann, lead to dizzy state with phosphorus description
              if (character === 'ann') {
                if (choice === 'fast') {
                  const newStamina = stamina - 30;
                  const newMoney = money + 5;
                  setStamina(newStamina);
                  setMoney(newMoney);
                  if (!checkGameOver(newStamina, mentality)) {
                    setGameState('ann-dizzy');
                  }
                } else {
                  const newStamina = stamina - 15;
                  const newMoney = money + 3;
                  setStamina(newStamina);
                  setMoney(newMoney);
                  if (!checkGameOver(newStamina, mentality)) {
                    setGameState('ann-dizzy');
                  }
                }
              } else {
                // Existing behavior for Tom/Mary
                if (choice === 'fast') {
                  const newStamina = stamina - 30;
                  const newMoney = money + 5;
                  setStamina(newStamina);
                  setMoney(newMoney);
                  if (!checkGameOver(newStamina, mentality)) {
                    setGameState('injury-scene');
                  }
                } else {
                  const newStamina = stamina - 15;
                  const newMoney = money + 3;
                  setStamina(newStamina);
                  setMoney(newMoney);
                  if (!checkGameOver(newStamina, mentality)) {
                    setGameState('injury-scene');
                  }
                }
              }
            } else if (choice === 'ann-hide') {
              const newStamina = stamina - 20;
              setStamina(newStamina);
              if (!checkGameOver(newStamina, mentality)) {
                setGameState('ann-accident');
              }
            } else if (choice === 'ann-ask-air') {
              const newMoney = money - 1;
              const newMentality = mentality - 20;
              setMoney(newMoney);
              setMentality(newMentality);
              setPopup({
                content: (
                  <div className="text-gray-700">
                    <p className="mb-2">"말도 안 되는 소리 하지 말고 가서 빨리 일해!"</p>
                    <p className="mb-2">감독관이 Ann을 윽박지릅니다.</p>
                    <p className="font-bold text-red-600">게으름을 부린다며 임금이 1펜스 깎였습니다.</p>
                    <p className="mt-2 text-sm">정신력 -20</p>
                  </div>
                ),
                button: '쓰러질 것 같은데... 참고 버티기가 힘이 들어.',
                onClose: () => {
                  setPopup(null);
                  setGameState('ann-accident');
                }
              });
            } else if (choice === 'ann-accident-hide') {
              // Ann hides pain and continues -> show popup warning then deduct stamina -30
              setPopup({
                content: (
                  <div className="text-gray-700">
                    <p className="mb-2">얼굴이 검게 변하는 것은 백린 증기에 장기간 노출되어 생기는 부작용의 전조 증상이었습니다. 이대로 방치한다면 Ann의 잇몸은 점차 괴사되고, 턱뼈가 외부에 노출될 수도 있습니다.</p>
                  </div>
                ),
                button: "Ann의 체력이 -30 되었습니다.",
                onClose: () => {
                  setPopup(null);
                  const newStamina = stamina - 30;
                  setStamina(newStamina);
                  if (!checkGameOver(newStamina, mentality)) {
                    setGameState('lunch-choice');
                  }
                }
              });
            } else if (choice === 'ann-accident-ask') {
              // Ann asks to rest -> popup then fired ending (automatic game end)
              setPopup({
                content: (
                  <div className="text-gray-700">
                    <p className="mb-2">"네가 공장에 남아 있으면 이 일이 위험하다는 걸 다른 아이들도 알게 될 거야. 넌 더 이상 공장에 남아 있을 수 없어."</p>
                  </div>
                ),
                button: '감독관이 Ann을 바깥으로 강제로 끌어냅니다.',
                onClose: () => {
                  setPopup(null);
                  setGameState('fired-ending');
                }
              });
            } else if (choice === 'lunch-eat') {
              setStamina(stamina + 10);
              setGameState('afternoon-work');
            } else if (choice === 'lunch-sleep') {
              setStamina(stamina + 10);
              setGameState('afternoon-work');
            } else if (choice === 'ann-afternoon-hard') {
              const newStamina = stamina - 10;
              setStamina(newStamina);
              if (!checkGameOver(newStamina, mentality)) {
                setGameState('dream-choice');
              }
            } else if (choice === 'ann-afternoon-rest') {
              const newMentality = mentality - 20;
              setMentality(newMentality);
              setPopup({
                content: (
                  <div className="text-gray-700">
                    <p className="mb-2">감독관이 옆에서 화를 냅니다.</p>
                    <p>"열심히 일해! 게으름 피우지 말고!"</p>
                    <p className="mt-2 text-sm">정신력 -20</p>
                  </div>
                ),
                button: '이제 점점 눈 앞이 흐릿해져가... ',
                onClose: () => {
                  setPopup(null);
                  setGameState('dream-choice');
                }
              });
            } else if (choice === 'afternoon-hard') {
              const newStamina = stamina - 30;
              setStamina(newStamina);
              if (!checkGameOver(newStamina, mentality)) {
                setGameState('dream-choice');
              }
            } else if (choice === 'afternoon-lazy') {
              const newMentality = mentality - 20;
              setMentality(newMentality);
              setPopup({
                content: (
                  <div className="text-gray-700">
                    <p className="mb-2">감독관이 옆에서 화를 냅니다.</p>
                    <p>"열심히 일해! 게으름 피우지 말고!"</p>
                    <p className="mt-2 text-sm">정신력 -20</p>
                  </div>
                ),
                button: character === 'tom' ? '기침도 하고... 몸도 아픈데... 그래도 참아야지...' : '손도 아프고... 다리도 저린데... 그래도 견뎌야지...',
                onClose: () => {
                  setPopup(null);
                  setGameState('dream-choice');
                }
              });
            } else if (choice === 'continue-work') {
              setGameState('lunch-choice');
            } else if (choice === 'quit-work') {
              setGameState('quit-choice');
            } else if (choice === 'dream-yes') {
              // For Ann, choosing the hopeful option returns to morning (1)
              if (character === 'ann') {
                // small restorative effect to simulate next day
                setStamina(Math.min(100, stamina + 10));
                setMentality(Math.min(100, mentality + 10));
                setGameState('morning-choice');
              } else {
                setGameState('sunday-school-choice');
              }
            } else if (choice === 'dream-no') {
              if (character === 'ann') {
                setGameState('ann-reality-ending');
              } else {
                setGameState('no-dream-ending');
              }
            } else if (choice === 'sunday-yes') {
              if (character === 'tom') {
                setPopup({
                  content: (
                    <div className="text-gray-700">
                      <div className="bg-gradient-to-br from-amber-50 to-yellow-100 border-4 border-amber-800 p-6 rounded-lg shadow-2xl" style={{fontFamily: 'serif'}}>
                        <div className="text-center mb-4">
                          <p className="text-sm text-amber-900 italic">형 Brad로부터 온 전보</p>
                        </div>
                        <div className="bg-white bg-opacity-60 p-4 rounded border-2 border-amber-700">
                          <p className="mb-3 text-gray-800 leading-relaxed" style={{fontSize: '15px'}}>보고싶은 내 동생 Tom. 나는 오늘 굴뚝 세 개를 청소했어. 그을음이 눈과 코에 가득 차고, 얼굴에는 검댕이 묻어.</p>
                          <p className="mb-3 text-gray-800 leading-relaxed" style={{fontSize: '15px'}}>숨 쉬기가 힘들어서 굴뚝 안에서 몰래 울면서 일을 했어.</p>
                          <p className="mb-3 text-gray-800 leading-relaxed" style={{fontSize: '15px'}}>맨체스터에 있는 너와 어머니, 아버지가 그리워. 언젠가 함께 살 수 있기를.</p>
                          <p className="text-gray-800 leading-relaxed" style={{fontSize: '15px'}}>사랑을 담아, 형 Brad가.</p>
                        </div>
                        <div className="mt-4 text-right">
                          <p className="text-sm text-amber-900 italic">- Brad</p>
                        </div>
                      </div>
                    </div>
                  ),
                  button: '형의 소식을 전해 들을 수 있게 되었어. 기뻐!',
                  onClose: () => {
                    setPopup(null);
                    setGameState('family-ending');
                  }
                });
              } else {
                setGameState('inventor-ending');
              }
            } else if (choice === 'sunday-no') {
              setGameState('factory-worker-ending');
            } else if (choice === 'begging') {
              const newStamina = stamina - 50;
              setStamina(newStamina);
              if (!checkGameOver(newStamina, mentality)) {
                setGameState('begging-ending');
              }
            } else if (choice === 'apprentice') {
              const newStamina = stamina - 25;
              const newMoney = money + 5;
              setStamina(newStamina);
              setMoney(newMoney);
              if (!checkGameOver(newStamina, mentality)) {
                setGameState('apprentice-ending');
              }
            } else if (choice === 'farm') {
              setStamina(stamina - 10);
              setMoney(money + 3);
              setGameState('farm-ending');
            } else if (choice === 'servant') {
              setStamina(stamina - 10);
              setMoney(money + 3);
              setGameState('servant-ending');
            } else if (choice === 'tom-hide-cough') {
              const newStamina = stamina - 30;
              setStamina(newStamina);
              if (!checkGameOver(newStamina, mentality)) {
                setGameState('tom-accident');
              }
            } else if (choice === 'tom-ask-air') {
              const newMoney = money - 1;
              const newMentality = mentality - 20;
              setMoney(newMoney);
              setMentality(newMentality);
              setPopup({
                content: (
                  <div className="text-gray-700">
                    <p className="mb-2">"말도 안 되는 소리 하지 말고 가서 빨리 일해!"</p>
                    <p className="mb-2">감독관이 Tom을 윽박지릅니다.</p>
                    <p className="font-bold text-red-600">게으름을 부린다며 임금이 1펜스 깎였습니다.</p>
                    <p className="mt-2 text-sm">정신력 -20</p>
                  </div>
                ),
                button: '기침도 나는데... 내 탓만 하네... 그래도 버텨야지...',
                onClose: () => {
                  setPopup(null);
                  setGameState('continue-work-choice');
                }
              });
            } else if (choice === 'tom-fired') {
              setGameState('fired-ending');
            } else if (choice === 'tom-beg') {
              setGameState('continue-work-choice');
            } else if (choice === 'mary-hide-injury') {
              const newStamina = stamina - 30;
              setStamina(newStamina);
              if (!checkGameOver(newStamina, mentality)) {
                setGameState('mary-accident');
              }
            } else if (choice === 'mary-ask-bandage') {
              const newMentality = mentality - 20;
              setMentality(newMentality);
              setPopup({
                content: (
                  <div className="text-gray-700">
                    <p className="mb-2">"피 따위 옷에 닦고 일해!"</p>
                    <p>감독관이 Mary를 윽박지릅니다.</p>
                    <p className="mt-2 text-sm">정신력 -20</p>
                  </div>
                ),
                button: '손이 아프지만... 참아야지.',
                onClose: () => {
                  setPopup(null);
                  setGameState('mary-accident');
                }
              });
            } else if (choice === 'mary-ask-rest') {
              const newMoney = money - 1;
              const newMentality = mentality - 20;
              setMoney(newMoney);
              setMentality(newMentality);
              setPopup({
                content: (
                  <div className="text-gray-700">
                    <p className="mb-2">"말도 안 되는 소리 하지 말고 가서 빨리 일해!"</p>
                    <p className="mb-2">감독관이 Mary를 윽박지릅니다.</p>
                    <p className="font-bold text-red-600">게으름을 부린다며 임금이 1펜스 깎였습니다.</p>
                    <p className="mt-2 text-sm">정신력 -20</p>
                  </div>
                ),
                button: '동생들에게 보낼 돈이 줄었어... 걱정이다.',
                onClose: () => {
                  setPopup(null);
                  setGameState('mary-accident');
                }
              });
            } else if (choice === 'mary-fired') {
              setGameState('fired-ending');
            } else if (choice === 'mary-beg') {
              setGameState('continue-work-choice');
            }
          };

          const renderIntro = () => (
            <div className="text-center">
              <h1 className="text-5xl font-bold mb-4 text-gray-800">산업혁명 시대</h1>
              <h2 className="text-3xl mb-8 text-gray-700">아동 노동자의 하루</h2>
              <div className="bg-gradient-to-r from-yellow-50 to-orange-50 border-l-4 border-yellow-500 p-6 mb-8 text-left rounded-lg shadow-md">
                <div className="flex items-start">
                  <div className="text-yellow-600">
                    <AlertCircle />
                  </div>
                  <div className="ml-3">
                    <p className="font-bold text-yellow-900 text-lg">1842년 영국 맨체스터</p>
                    <p className="text-yellow-800 mt-2 leading-relaxed">
                      산업혁명 시기, 수많은 어린이들이 위험한 공장에서 하루 12시간 이상 일했습니다. 
                      이 게임을 통해 당시 아동 노동자들의 삶을 체험하고, 노동권의 중요성을 배워보세요.
                    </p>
                  </div>
                </div>
              </div>
              <button
                onClick={() => setGameState('character-select')}
                className="bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-10 py-4 rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all font-bold text-lg shadow-lg transform hover:scale-105"
              >
                시작하기
              </button>
            </div>
          );

          const renderCharacterSelect = () => (
            <div>
              <h2 className="text-4xl font-bold mb-8 text-center text-gray-800">캐릭터를 선택하세요</h2>
              <div className="grid md:grid-cols-3 gap-8">
                {Object.entries(characters).map(([key, char]) => (
                  <div
                    key={key}
                    className="border-2 border-gray-200 rounded-2xl p-8 hover:border-blue-400 hover:shadow-2xl transition-all cursor-pointer bg-gradient-to-br from-white to-gray-50"
                    onClick={() => {
                      setCharacter(key);
                      setGameState('morning-choice');
                    }}
                  >
                    <div className={`w-24 h-24 ${char.color} rounded-full mx-auto mb-6 flex items-center justify-center text-white shadow-lg transform hover:scale-110 transition-transform`}>
                      <Users />
                    </div>
                    <h3 className="text-3xl font-bold text-center mb-3 text-gray-800">{char.name}</h3>
                    <p className="text-center text-gray-600 mb-6 text-lg">나이: {char.age}세</p>
                    <div className="bg-gradient-to-r from-blue-50 to-indigo-50 p-5 rounded-xl mb-4 border border-blue-100">
                      <p className="font-bold text-blue-700 mb-2 text-lg">{char.job}</p>
                      <p className="text-sm text-blue-600">{char.workplace}</p>
                    </div>
                    <p className="text-sm text-gray-700 leading-relaxed mb-4">{char.description}</p>
                    <div className="bg-amber-50 border-l-4 border-amber-500 p-4 rounded mb-4">
                      <p className="text-xs font-bold text-amber-900 mb-2">가정 환경</p>
                      <p className="text-sm text-amber-800 leading-relaxed">{char.family}</p>
                    </div>
                    <button className="w-full mt-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all font-bold shadow-md">
                      {char.name} 선택하기
                    </button>
                  </div>
                ))}
              </div>
            </div>
          );

          const renderMorningChoice = () => (
            <div>
              <Stats />
              <div className="bg-gray-50 p-6 rounded-lg mb-6">
                <div className="flex justify-center mb-4 text-gray-700">
                  <Clock />
                </div>
                <h3 className="text-2xl font-bold mb-4">{character === 'ann' ? '아침 5시' : '아침 5시'}</h3>
                <p className="text-gray-700 leading-relaxed mb-4">
                  새벽 종소리가 울립니다. 어젯밤 늦게까지 일해서 너무 피곤합니다. 
                  {characters[character].name}은(는) 눈을 비비며 일어나야 할지 고민합니다.
                </p>
                <div className="bg-yellow-50 border-l-4 border-yellow-500 p-3">
                  <p className="text-sm text-yellow-800">
                    <strong>역사적 사실:</strong> 산업혁명 시기 아동 노동자들은 새벽 5시부터 저녁 7시까지, 
                    하루 14시간 이상 일했습니다. 지각하면 임금이 삭감되거나 체벌을 받았습니다.
                  </p>
                </div>
              </div>
              <div className="space-y-3">
                <button
                  onClick={() => makeChoice('ontime')}
                  className="w-full bg-gradient-to-r from-green-500 to-emerald-500 text-white p-5 rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all text-left shadow-md transform hover:scale-105"
                >
                  <div className="font-bold mb-2 text-lg">서둘러 제시간에 출근한다</div>
                  <div className="text-sm text-green-50">체력 -20, 임금 유지</div>
                </button>
                <button
                  onClick={() => makeChoice('late')}
                  className="w-full bg-gradient-to-r from-orange-500 to-amber-500 text-white p-5 rounded-xl hover:from-orange-600 hover:to-amber-600 transition-all text-left shadow-md transform hover:scale-105"
                >
                  <div className="font-bold mb-2 text-lg">조금 더 자고 천천히 출근한다</div>
                  <div className="text-sm text-orange-50">체력 -10, 임금 삭감 (-2펜스), 정신력 -20</div>
                </button>
                <button
                  onClick={() => makeChoice('pretend-sick')}
                  className="w-full bg-gradient-to-r from-red-500 to-rose-500 text-white p-5 rounded-xl hover:from-red-600 hover:to-rose-600 transition-all text-left shadow-md transform hover:scale-105"
                >
                  <div className="font-bold mb-2 text-lg">아픈 척 해서 오늘은 쉬어 본다</div>
                  <div className="text-sm text-red-50">위험한 선택...</div>
                </button>
              </div>
            </div>
          );

          const renderWorkSpeedChoice = () => (
            <div>
              <Stats />
              <div className="bg-gray-50 p-6 rounded-lg mb-6">
                <h3 className="text-2xl font-bold mb-4">공장 작업 중</h3>
                <p className="text-gray-700 leading-relaxed mb-4">
                  {character === 'ann'
                    ? '작은 성냥개비를 백린에 담가야 합니다. 백린에서 증기가 계속 나서 눈이 따갑고 숨쉬기가 힘듭니다.'
                    : character === 'mary'
                      ? '물레가 무서운 속도로 돌아가고 있습니다. 끊어진 실을 연결하려면 돌아가는 기계 사이로 손을 넣어야 합니다.'
                      : '기계들이 쉴 새 없이 움직이고 있습니다. 엉킨 실을 빨리 풀어내지 않으면 감독관에게 혼이 납니다.'}
                </p>
                <div className="bg-red-50 border-l-4 border-red-500 p-3">
                  <p className="text-sm text-red-800">
                    <strong>위험:</strong> 당시 공장 작업은 안전장치가 없었고, 유독 물질에 노출되는 일이 많았습니다.
                  </p>
                </div>
              </div>
              <div className="space-y-3">
                <button
                  onClick={() => makeChoice('fast')}
                  className="w-full bg-gradient-to-r from-red-500 to-rose-500 text-white p-5 rounded-xl hover:from-red-600 hover:to-rose-600 transition-all text-left shadow-md transform hover:scale-105"
                >
                  <div className="font-bold mb-2 text-lg">빠르게 일한다</div>
                  <div className="text-sm text-red-50">{character === 'ann' ? '임금 증가 (+5펜스), 부상 위험 높음, 체력 -30' : '임금 증가 (+5펜스), 부상 위험 높음, 체력 -30'}</div>
                </button>
                <button
                  onClick={() => makeChoice('safe')}
                  className="w-full bg-gradient-to-r from-blue-500 to-indigo-500 text-white p-5 rounded-xl hover:from-blue-600 hover:to-indigo-600 transition-all text-left shadow-md transform hover:scale-105"
                >
                  <div className="font-bold mb-2 text-lg">조심하며 천천히 일한다</div>
                  <div className="text-sm text-blue-50">임금 보통 (+3펜스), 체력 -15</div>
                </button>
              </div>
            </div>
          );

          const renderInjuryScene = () => {
            if (character === 'tom') {
              return (
                <div>
                  <Stats />
                  <div className="bg-red-50 p-6 rounded-lg mb-6 border-2 border-red-300">
                    <div className="flex justify-center mb-4 text-red-600">
                      <AlertCircle />
                    </div>
                    <h3 className="text-2xl font-bold mb-4 text-red-800">콜록콜록!</h3>
                    <p className="text-gray-700 leading-relaxed mb-4">
                      먼지와 섬유 찌꺼기로 가득한 공장에서 일한 결과, Tom이 계속해서 기침을 합니다.
                    </p>
                    <div className="bg-gray-100 p-3 rounded">
                      <p className="text-sm text-gray-700">
                        감독관에게 말할까요?
                      </p>
                    </div>
                  </div>
                  <div className="space-y-3">
                    <button
                      onClick={() => makeChoice('tom-hide-cough')}
                      className="w-full bg-gradient-to-r from-orange-500 to-amber-500 text-white p-5 rounded-xl hover:from-orange-600 hover:to-amber-600 transition-all text-left shadow-md transform hover:scale-105"
                    >
                      <div className="font-bold mb-2 text-lg">감독관에게 말하지 않고 옷소매로 기침을 참으며 계속 일한다</div>
                      <div className="text-sm text-orange-50">참고 견딘다</div>
                    </button>
                    <button
                      onClick={() => makeChoice('tom-ask-air')}
                      className="w-full bg-gradient-to-r from-blue-500 to-indigo-500 text-white p-5 rounded-xl hover:from-blue-600 hover:to-indigo-600 transition-all text-left shadow-md transform hover:scale-105"
                    >
                      <div className="font-bold mb-2 text-lg">감독관에게 기침 때문에 바깥 공기를 쐬고 오게 해 달라고 요청한다</div>
                      <div className="text-sm text-blue-50">도움을 청한다</div>
                    </button>
                  </div>
                </div>
              );
            } else {
              return (
                <div>
                  <Stats />
                  <div className="bg-red-50 p-6 rounded-lg mb-6 border-2 border-red-300">
                    <div className="flex justify-center mb-4 text-red-600">
                      <AlertCircle />
                    </div>
                    <h3 className="text-2xl font-bold mb-4 text-red-800">사고 발생!</h3>
                    <p className="text-gray-700 leading-relaxed mb-4">
                      조심했지만 순간적으로 실수하여 기계에 손을 다쳤습니다. 다행히 큰 부상은 아니지만, 피가 멈추질 않습니다.
                    </p>
                    <div className="bg-gray-100 p-3 rounded">
                      <p className="text-sm text-gray-700">
                        감독관에게 말할까요?
                      </p>
                    </div>
                  </div>
                  <div className="space-y-3">
                    <button
                      onClick={() => makeChoice('mary-hide-injury')}
                      className="w-full bg-gradient-to-r from-orange-500 to-amber-500 text-white p-5 rounded-xl hover:from-orange-600 hover:to-amber-600 transition-all text-left shadow-md transform hover:scale-105"
                    >
                      <div className="font-bold mb-2 text-lg">감독관에게 말하지 않고 옷소매로 피를 닦은 뒤 참고 버틴다</div>
                      <div className="text-sm text-orange-50">참고 견딘다</div>
                    </button>
                    <button
                      onClick={() => makeChoice('mary-ask-bandage')}
                      className="w-full bg-gradient-to-r from-blue-500 to-indigo-500 text-white p-5 rounded-xl hover:from-blue-600 hover:to-indigo-600 transition-all text-left shadow-md transform hover:scale-105"
                    >
                      <div className="font-bold mb-2 text-lg">감독관에게 다쳤으니 잠깐 붕대를 감고 와서 다시 일하겠다고 말한다</div>
                      <div className="text-sm text-blue-50">도움을 청한다</div>
                    </button>
                    <button
                      onClick={() => makeChoice('mary-ask-rest')}
                      className="w-full bg-gradient-to-r from-red-500 to-rose-500 text-white p-5 rounded-xl hover:from-red-600 hover:to-rose-600 transition-all text-left shadow-md transform hover:scale-105"
                    >
                      <div className="font-bold mb-2 text-lg">감독관에게 다쳤으니 오늘은 일을 더 이상 못 할 것 같다고 말한다</div>
                      <div className="text-sm text-red-50">쉬어야겠다</div>
                    </button>
                  </div>
                </div>
              );
            }
          };

          const renderTomAccident = () => (
            <div>
              <Stats />
              <div className="bg-red-50 p-6 rounded-lg mb-6 border-2 border-red-300">
                <div className="flex justify-center mb-4 text-red-600">
                  <AlertCircle />
                </div>
                <h3 className="text-2xl font-bold mb-4 text-red-800">사고 발생!</h3>
                <p className="text-gray-700 leading-relaxed mb-4">
                  쉬지 않고 계속 일을 하자, Tom의 기침이 멈추질 않습니다. 그리고 공장주에게 아프다는 사실을 들켰습니다. 
                  공장주는 아픈 Tom은 일을 제대로 하지 못할 것이라며, Tom을 공장에서 쫓아내려 합니다.
                </p>
                <div className="bg-gray-100 p-3 rounded">
                  <p className="text-sm text-gray-700">
                    "아픈 녀석은 일도 제대로 못 하고 사고만 칠 거야. 나가!"
                  </p>
                </div>
              </div>
              <div className="space-y-3">
                <button
                  onClick={() => makeChoice('tom-fired')}
                  className="w-full bg-gradient-to-r from-red-500 to-rose-500 text-white p-5 rounded-xl hover:from-red-600 hover:to-rose-600 transition-all text-left shadow-md transform hover:scale-105"
                >
                  <div className="font-bold mb-2 text-lg">겁이 나서 아무 말도 못 한 채 공장에서 해고된다</div>
                  <div className="text-sm text-red-50">게임 종료</div>
                </button>
                <button
                  onClick={() => makeChoice('tom-beg')}
                  className="w-full bg-gradient-to-r from-orange-500 to-amber-500 text-white p-5 rounded-xl hover:from-orange-600 hover:to-amber-600 transition-all text-left shadow-md transform hover:scale-105"
                >
                  <div className="font-bold mb-2 text-lg">열심히 일할 테니 쫓아내지 말아달라고 애원한다</div>
                  <div className="text-sm text-orange-50">공장에 남는다</div>
                </button>
              </div>
            </div>
          );

          const renderMaryAccident = () => (
            <div>
              <Stats />
              <div className="bg-red-50 p-6 rounded-lg mb-6 border-2 border-red-300">
                <div className="flex justify-center mb-4 text-red-600">
                  <AlertCircle />
                </div>
                <h3 className="text-2xl font-bold mb-4 text-red-800">사고 발생!</h3>
                <p className="text-gray-700 leading-relaxed mb-4">
                  다쳐서 무뎌진 손가락으로 쉬지 않고 계속 일을 하다가, Mary가 끊어진 실을 제때 연결하지 못해 기계가 멈췄습니다. 
                  감독관과 공장주가 달려왔고, 공장주는 아픈 Mary가 무능하고 사고만 친다며 Mary를 공장에서 쫓아내려 합니다.
                </p>
                <div className="bg-gray-100 p-3 rounded">
                  <p className="text-sm text-gray-700">
                    "다친 녀석은 일도 제대로 못 하고 사고만 칠 거야. 나가!"
                  </p>
                </div>
              </div>
              <div className="space-y-3">
                <button
                  onClick={() => makeChoice('mary-fired')}
                  className="w-full bg-gradient-to-r from-red-500 to-rose-500 text-white p-5 rounded-xl hover:from-red-600 hover:to-rose-600 transition-all text-left shadow-md transform hover:scale-105"
                >
                  <div className="font-bold mb-2 text-lg">겁이 나서 아무 말도 못 한 채 공장에서 해고된다</div>
                  <div className="text-sm text-red-50">게임 종료</div>
                </button>
                <button
                  onClick={() => makeChoice('mary-beg')}
                  className="w-full bg-gradient-to-r from-orange-500 to-amber-500 text-white p-5 rounded-xl hover:from-orange-600 hover:to-amber-600 transition-all text-left shadow-md transform hover:scale-105"
                >
                  <div className="font-bold mb-2 text-lg">열심히 일할 테니 쫓아내지 말아달라고 애원한다</div>
                  <div className="text-sm text-orange-50">공장에 남는다</div>
                </button>
              </div>
            </div>
          );

          const renderContinueWorkChoice = () => (
            <div>
              <Stats />
              <div className="bg-gray-50 p-6 rounded-lg mb-6">
                <h3 className="text-2xl font-bold mb-4">계속 일할 것인가?</h3>
                <p className="text-gray-700 leading-relaxed mb-4">
                  일이 계속됩니다. 선택에 따라 점심시간으로 가거나 공장을 떠날 수 있습니다.
                </p>
                <div className="bg-yellow-50 border-l-4 border-yellow-500 p-3">
                  <p className="text-sm text-yellow-800">
                    신중히 선택하세요. 선택에 따라 임금과 체력, 정신력에 변화가 있습니다.
                  </p>
                </div>
              </div>
              <div className="space-y-3">
                <button
                  onClick={() => makeChoice('continue-work')}
                  className="w-full bg-gradient-to-r from-green-500 to-emerald-500 text-white p-5 rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all text-left shadow-md transform hover:scale-105"
                >
                  <div className="font-bold mb-2 text-lg">일을 계속한다</div>
                  <div className="text-sm text-green-50">다음으로 진행합니다 (점심 시간으로 이동)</div>
                </button>
                <button
                  onClick={() => makeChoice('quit-work')}
                  className="w-full bg-gradient-to-r from-gray-500 to-gray-600 text-white p-5 rounded-xl hover:from-gray-600 hover:to-gray-700 transition-all text-left shadow-md transform hover:scale-105"
                >
                  <div className="font-bold mb-2 text-lg">공장을 떠난다</div>
                  <div className="text-sm text-gray-100">공장을 그만두고 다른 선택지를 고릅니다</div>
                </button>
              </div>
            </div>
          );

          // Ann-specific scenes
          const renderAnnDizzy = () => (
            <div>
              <Stats />
              <div className="bg-red-50 p-6 rounded-lg mb-6 border-2 border-red-300">
                <div className="flex justify-center mb-4 text-red-600">
                  <AlertCircle />
                </div>
                <h3 className="text-2xl font-bold mb-4 text-red-800">세상이 빙글빙글</h3>
                <p className="text-gray-700 leading-relaxed mb-4">
                  백린은 악취가 나고, 불이 잘 붙는 성질을 가졌습니다. 그런데 공장에서 왜인지 썩은 마늘 냄새가 진동하는 것 같고, 어지럽습니다.
                </p>
                <div className="bg-gray-100 p-3 rounded">
                  <p className="text-sm text-gray-700">감독관에게 말할까요?</p>
                </div>
              </div>
              <div className="space-y-3">
                <button
                  onClick={() => makeChoice('ann-hide')}
                  className="w-full bg-gradient-to-r from-orange-500 to-amber-500 text-white p-5 rounded-xl hover:from-orange-600 hover:to-amber-600 transition-all text-left shadow-md transform hover:scale-105"
                >
                  <div className="font-bold mb-2 text-lg">감독관에게 말하지 않고, 자신의 착각일 것이라 생각하며 참고 버틴다</div>
                  <div className="text-sm text-orange-50">체력 -20</div>
                </button>
                <button
                  onClick={() => makeChoice('ann-ask-air')}
                  className="w-full bg-gradient-to-r from-blue-500 to-indigo-500 text-white p-5 rounded-xl hover:from-blue-600 hover:to-indigo-600 transition-all text-left shadow-md transform hover:scale-105"
                >
                  <div className="font-bold mb-2 text-lg">감독관에게 어지러우니 잠깐 나가서 공기를 쐬고 와도 되냐고 묻는다</div>
                  <div className="text-sm text-blue-50">도움을 청한다</div>
                </button>
              </div>
            </div>
          );

          const renderAnnAccident = () => (
            <div>
              <Stats />
              <div className="bg-red-50 p-6 rounded-lg mb-6 border-2 border-red-300">
                <div className="flex justify-center mb-4 text-red-600">
                  <AlertCircle />
                </div>
                <h3 className="text-2xl font-bold mb-4 text-red-800">사고 발생!</h3>
                <p className="text-gray-700 leading-relaxed mb-4">
                  Ann의 얼굴이 점차 까맣게 변하고 있습니다. 잇몸에서는 고름이 배어 나오고, 치통이 느껴집니다.
                </p>
                <div className="bg-gray-100 p-3 rounded">
                  <p className="text-sm text-gray-700">감독관에게 말할까요?</p>
                </div>
              </div>
              <div className="space-y-3">
                <button
                  onClick={() => makeChoice('ann-accident-hide')}
                  className="w-full bg-gradient-to-r from-orange-500 to-amber-500 text-white p-5 rounded-xl hover:from-orange-600 hover:to-amber-600 transition-all text-left shadow-md transform hover:scale-105"
                >
                  <div className="font-bold mb-2 text-lg">아프다는 사실을 감독관에게 숨기고 계속 일한다</div>
                  <div className="text-sm text-orange-50">위험하지만 버틴다</div>
                </button>
                <button
                  onClick={() => makeChoice('ann-accident-ask')}
                  className="w-full bg-gradient-to-r from-blue-500 to-indigo-500 text-white p-5 rounded-xl hover:from-blue-600 hover:to-indigo-600 transition-all text-left shadow-md transform hover:scale-105"
                >
                  <div className="font-bold mb-2 text-lg">감독관에게 조금만 쉬게 해달라고 애원한다</div>
                  <div className="text-sm text-blue-50">도움을 요청한다</div>
                </button>
              </div>
            </div>
          );

          const renderLunchChoice = () => (
            <div>
              <Stats />
              <div className="bg-gray-50 p-6 rounded-lg mb-6">
                <h3 className="text-2xl font-bold mb-4">점심 시간</h3>
                <p className="text-gray-700 leading-relaxed mb-4">
                  잠깐의 점심 시간이 찾아왔습니다. {characters[character].name}에게 주어진 것은 빵과 죽 정도의 간단한 식사입니다.
                  피곤하고 배는 고프지만, 식욕이 없습니다.
                </p>
                <div className="bg-yellow-50 border-l-4 border-yellow-500 p-3">
                  <p className="text-sm text-yellow-800">
                    <strong>역사적 사실:</strong> 아동 노동자들의 점심 시간은 보통 30분에서 1시간 정도였으며, 
                    빵과 죽 같은 단순한 음식만 제공되었습니다.
                  </p>
                </div>
              </div>
              <div className="space-y-3">
                <button
                  onClick={() => makeChoice('lunch-eat')}
                  className="w-full bg-gradient-to-r from-green-500 to-emerald-500 text-white p-5 rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all text-left shadow-md transform hover:scale-105"
                >
                  <div className="font-bold mb-2 text-lg">허겁지겁 식사를 해치우고 일한다</div>
                  <div className="text-sm text-green-50">빨리 다시 일하러 간다</div>
                </button>
                <button
                  onClick={() => makeChoice('lunch-sleep')}
                  className="w-full bg-gradient-to-r from-blue-500 to-indigo-500 text-white p-5 rounded-xl hover:from-blue-600 hover:to-indigo-600 transition-all text-left shadow-md transform hover:scale-105"
                >
                  <div className="font-bold mb-2 text-lg">쉬지 않고 힘들게 일하니 식욕이 없네. 그냥 바닥에 앉아서 잠깐 눈이나 붙여야지</div>
                  <div className="text-sm text-blue-50">차가운 벽에 기대어 쪽잠을 청한다</div>
                </button>
              </div>
            </div>
          );

          const renderAfternoonWork = () => {
            if (character === 'ann') {
              return (
                <div>
                  <Stats />
                  <div className="bg-gray-50 p-6 rounded-lg mb-6">
                    <h3 className="text-2xl font-bold mb-4">오후 작업</h3>
                    <p className="text-gray-700 leading-relaxed mb-4">
                      점심 식사 후, 다시 일이 시작되었습니다. Ann은 오전 동안 만든 성냥을 성냥갑에 가지런히 포장해야 합니다.
                    </p>
                  </div>
                  <div className="space-y-3">
                    <button
                      onClick={() => makeChoice('ann-afternoon-hard')}
                      className="w-full bg-gradient-to-r from-green-500 to-emerald-500 text-white p-5 rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all text-left shadow-md transform hover:scale-105"
                    >
                      <div className="font-bold mb-2 text-lg">독성 물질을 오랜 시간 만져 손끝에서 통증이 느껴지지만, 참고 계속해서 일한다</div>
                      <div className="text-sm text-green-50">체력 -20</div>
                    </button>
                    <button
                      onClick={() => makeChoice('ann-afternoon-rest')}
                      className="w-full bg-gradient-to-r from-orange-500 to-amber-500 text-white p-5 rounded-xl hover:from-orange-600 hover:to-amber-600 transition-all text-left shadow-md transform hover:scale-105"
                    >
                      <div className="font-bold mb-2 text-lg">손끝이 따가우니 적당히 쉬어 가며 일을 한다</div>
                      <div className="text-sm text-orange-50">감독관의 꾸중을 듣게 된다</div>
                    </button>
                  </div>
                </div>
              );
            } else if (character === 'tom') {
              return (
                <div>
                  <Stats />
                  <div className="bg-gray-50 p-6 rounded-lg mb-6">
                    <h3 className="text-2xl font-bold mb-4">오후 작업</h3>
                    <p className="text-gray-700 leading-relaxed mb-4">
                      점심 식사 후, 다시 일이 시작되었습니다. Tom은 계속해서 실을 정리하고 매듭을 풀어야 합니다.
                      기침은 여전히 나오지만, 일은 계속되어야 합니다.
                    </p>
                  </div>
                  <div className="space-y-3">
                    <button
                      onClick={() => makeChoice('afternoon-hard')}
                      className="w-full bg-gradient-to-r from-green-500 to-emerald-500 text-white p-5 rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all text-left shadow-md transform hover:scale-105"
                    >
                      <div className="font-bold mb-2 text-lg">기침이 나더라도 최선을 다해 기침을 참고 실을 정리한다</div>
                      <div className="text-sm text-green-50">최선을 다한다</div>
                    </button>
                    <button
                      onClick={() => makeChoice('afternoon-lazy')}
                      className="w-full bg-gradient-to-r from-orange-500 to-amber-500 text-white p-5 rounded-xl hover:from-orange-600 hover:to-amber-600 transition-all text-left shadow-md transform hover:scale-105"
                    >
                      <div className="font-bold mb-2 text-lg">기침 때문에 힘드니 적당히 쉬어 가면서 일을 한다</div>
                      <div className="text-sm text-orange-50">체력을 아낀다</div>
                    </button>
                  </div>
                </div>
              );
            } else {
              return (
                <div>
                  <Stats />
                  <div className="bg-gray-50 p-6 rounded-lg mb-6">
                    <h3 className="text-2xl font-bold mb-4">오후 작업</h3>
                    <p className="text-gray-700 leading-relaxed mb-4">
                      점심 식사 후, 다시 일이 시작되었습니다. Mary는 계속해서 끊어진 실을 연결해야 합니다.
                      손은 여전히 아프지만, 일은 계속되어야 합니다.
                    </p>
                  </div>
                  <div className="space-y-3">
                    <button
                      onClick={() => makeChoice('afternoon-hard')}
                      className="w-full bg-gradient-to-r from-green-500 to-emerald-500 text-white p-5 rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all text-left shadow-md transform hover:scale-105"
                    >
                      <div className="font-bold mb-2 text-lg">손이 아픈 데다가, 방적 기계가 너무 빨리 돌아가서 겁이 나지만, 최선을 다해 일한다</div>
                      <div className="text-sm text-green-50">최선을 다한다</div>
                    </button>
                    <button
                      onClick={() => makeChoice('afternoon-lazy')}
                      className="w-full bg-gradient-to-r from-orange-500 to-amber-500 text-white p-5 rounded-xl hover:from-orange-600 hover:to-amber-600 transition-all text-left shadow-md transform hover:scale-105"
                    >
                      <div className="font-bold mb-2 text-lg">손이 아프니 적당히 쉬어 가면서 일을 한다</div>
                      <div className="text-sm text-orange-50">체력을 아낀다</div>
                    </button>
                  </div>
                </div>
              );
            }
          };

          const renderDreamChoice = () => (
            <div>
              <Stats />
              <div className="bg-gradient-to-r from-purple-50 to-pink-50 p-6 rounded-lg mb-6">
                <h3 className="text-2xl font-bold mb-4">하루 일과를 끝내고</h3>
                <p className="text-gray-700 leading-relaxed mb-4">
                  어두컴컴해진 9시가 다 되어서야 {characters[character].name}은(는) 퇴근했습니다. 
                  저녁도 먹는 둥 마는 둥 하고 침대에 누운 {characters[character].name}은(는) 자신의 미래를 상상해 봅니다.
                  "나는 어떤 어른이 될까? 계속 이렇게 공장에서만 살게 될까?"
                </p>
                <div className="bg-white p-4 rounded-lg border border-purple-200">
                  <p className="text-sm text-gray-600 italic">
                    {character === 'tom' 
                      ? 'Tom의 꿈은 무엇일까요? Tom은 글자를 배워서 런던에 있는 형 Brad의 안부를 물을 수 있을까요?'
                      : character === 'mary'
                        ? 'Mary의 꿈은 무엇일까요? Mary는 높은 하늘을 나는 새처럼 자유로운 삶을 살 수 있을까요?'
                        : 'Ann의 꿈은 무엇일까요? Ann이 그리는 미래는 어떤 모습일까요?'}
                  </p>
                </div>
              </div>
              <p className="text-center font-bold mb-4">무엇을 상상하시나요?</p>
              <div className="space-y-3">
                <button
                  onClick={() => makeChoice('dream-yes')}
                  className="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white p-5 rounded-xl hover:from-purple-600 hover:to-pink-600 transition-all text-left shadow-md transform hover:scale-105"
                >
                  <div className="font-bold mb-2 text-lg">
                    {character === 'tom' 
                      ? '"언젠가 글자를 배워서 형과 편지를 주고받을 거야!"'
                      : character === 'mary'
                        ? '"나는 언젠가 이 기계를 더 멋지고 효율적으로 개량할 거야!"'
                        : '공장 기숙사가 아니라, 동생과 둘이 오붓하게 살 수 있는 집을 구할 수 있으면 좋겠어.'}
                  </div>
                  <div className="text-sm text-purple-50">희망을 품고 더 나은 미래를 꿈꾼다</div>
                </button>
                <button
                  onClick={() => makeChoice('dream-no')}
                  className="w-full bg-gradient-to-r from-gray-500 to-gray-600 text-white p-5 rounded-xl hover:from-gray-600 hover:to-gray-700 transition-all text-left shadow-md transform hover:scale-105"
                >
                  <div className="font-bold mb-2 text-lg">"꿈은 무슨. 당장 먹고 사는 일이 너무 급한걸. 헛된 망상이야."</div>
                  <div className="text-sm text-gray-100">현실에 집중한다</div>
                </button>
              </div>
            </div>
          );

          const renderSundaySchoolChoice = () => (
            <div>
              <Stats />
              <div className="bg-blue-50 p-6 rounded-lg mb-6">
                <h3 className="text-2xl font-bold mb-4">Sunday School 기회</h3>
                <p className="text-gray-700 leading-relaxed mb-4">
                  공장에서 운영하는 Sunday School에 참여할 수 있는 기회가 생겼습니다.
                  일요일에도 쉬지 못하고 공부해야 하지만, 글자를 배우고 지식을 얻을 수 있습니다.
                  {character === 'tom' && ' Tom은 형 Brad와 편지를 주고받기 위해 글자를 배우고 싶습니다.'}
                </p>
                <div className="bg-yellow-50 border-l-4 border-yellow-500 p-3">
                  <p className="text-sm text-yellow-800">
                    <strong>역사적 배경:</strong> 19세기 영국에서는 일부 공장들이 노동자 자녀들을 위해 
                    Sunday School을 운영했습니다. 이곳에서 읽기, 쓰기, 기초 산술을 배울 수 있었습니다.
                    이는 가난한 아이들에게 교육을 받을 수 있는 거의 유일한 통로였으며, 
                    교회 중심의 자선 교육으로 사회적 상승의 유일한 기회였습니다.
                  </p>
                </div>
              </div>
              <div className="space-y-3">
                <button
                  onClick={() => makeChoice('sunday-yes')}
                  className="w-full bg-gradient-to-r from-green-500 to-emerald-500 text-white p-5 rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all text-left shadow-md transform hover:scale-105"
                >
                  <div className="font-bold mb-2 text-lg">Sunday School에 참여한다</div>
                  <div className="text-sm text-green-50">교육의 기회를 잡는다</div>
                </button>
                <button
                  onClick={() => makeChoice('sunday-no')}
                  className="w-full bg-gradient-to-r from-gray-500 to-gray-600 text-white p-5 rounded-xl hover:from-gray-600 hover:to-gray-700 transition-all text-left shadow-md transform hover:scale-105"
                >
                  <div className="font-bold mb-2 text-lg">참여하지 않는다</div>
                  <div className="text-sm text-gray-100">쉬는 것이 더 중요하다</div>
                </button>
              </div>
            </div>
          );

          const renderQuitChoice = () => (
            <div>
              <Stats />
              <div className="bg-gray-50 p-6 rounded-lg mb-6">
                <h3 className="text-2xl font-bold mb-4">공장을 떠나다</h3>
                <p className="text-gray-700 leading-relaxed mb-4">
                  {characters[character].name}은(는) 공장을 그만두고 집으로 돌아왔습니다.
                  하지만 1840년대 영국에서 가난한 어린이가 할 수 있는 일은 많지 않았습니다.
                </p>
                <div className="bg-red-50 border-l-4 border-red-500 p-3">
                  <p className="text-sm text-red-800">
                    <strong>역사적 현실:</strong> 산업혁명 시기 도시의 가난한 아이들은 
                    공장 노동 외에는 선택지가 거의 없었습니다.
                  </p>
                </div>
              </div>
              <p className="text-center font-bold mb-4">어떤 길을 선택하시겠습니까?</p>
              <div className="space-y-3">
                <button
                  onClick={() => makeChoice('begging')}
                  className="w-full bg-gradient-to-r from-gray-500 to-gray-600 text-white p-5 rounded-xl hover:from-gray-600 hover:to-gray-700 transition-all text-left shadow-md transform hover:scale-105"
                >
                  <div className="font-bold mb-2 text-lg">거리에서 구걸한다</div>
                  <div className="text-sm text-gray-100">가장 흔한 선택이었지만 위험했습니다</div>
                </button>
                <button
                  onClick={() => makeChoice('apprentice')}
                  className="w-full bg-gradient-to-r from-blue-500 to-indigo-500 text-white p-5 rounded-xl hover:from-blue-600 hover:to-indigo-600 transition-all text-left shadow-md transform hover:scale-105"
                >
                  <div className="font-bold mb-2 text-lg">도제로 들어간다</div>
                  <div className="text-sm text-blue-50">기술을 배울 수 있지만 학대받을 위험도 있었습니다</div>
                </button>
                <button
                  onClick={() => makeChoice('farm')}
                  className="w-full bg-gradient-to-r from-green-500 to-emerald-500 text-white p-5 rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all text-left shadow-md transform hover:scale-105"
                >
                  <div className="font-bold mb-2 text-lg">농장 일꾼이 된다</div>
                  <div className="text-sm text-green-50">시골로 돌아가 농사일을 돕습니다</div>
                </button>
                <button
                  onClick={() => makeChoice('servant')}
                  className="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white p-5 rounded-xl hover:from-purple-600 hover:to-pink-600 transition-all text-left shadow-md transform hover:scale-105"
                >
                  <div className="font-bold mb-2 text-lg">하인이 된다</div>
                  <div className="text-sm text-purple-50">부유한 집안의 하인으로 일합니다</div>
                </button>
              </div>
            </div>
          );

          const calculateScore = () => {
            const score = (stamina * 0.3) + (money * 5) + (mentality * 0.4);
            return Math.min(100, Math.max(0, Math.round(score)));
          };

          const renderEnding = (type) => {
            const endings = {
              'death-ending': {
                title: '너무 힘들었던 삶 💔',
                content: `${characters[character].name}의 몸은 더 이상 버틸 수 없었습니다. 어린 나이에 혹독한 노동과 열악한 환경 속에서 건강이 급격히 악화되었고, 결국 ${characters[character].name}은(는) 세상을 떠나고 말았습니다.`,
                lesson: '산업혁명 초기, 많은 아동 노동자들이 과로, 영양실조, 산업재해, 질병으로 목숨을 잃었습니다. 이러한 비극적인 현실이 알려지면서 아동 노동 개혁 운동이 시작되었고, 점차 아동을 보호하는 법률이 만들어지기 시작했습니다.',
                color: 'from-gray-700 to-black'
              },
              'family-ending': {
                title: '온 가족의 단란한 삶 ✨',
                content: 'Sunday School에서 배운 글쓰기 덕분에 형 Brad와 편지를 주고받을 수 있게 되었습니다. 온 가족이 열심히 일한 끝에, 결국 맨체스터 교외의 작은 집에서 함께 모여 살 수 있게 되었습니다. 비록 여전히 가난했지만, 가족이 함께 있다는 것만으로도 행복했습니다.',
                lesson: '교육은 가난한 환경에서도 인생을 바꿀 수 있는 기회였습니다. 실제로 산업혁명 시기에도 일부 노동자들이 교육을 통해 더 나은 삶을 살 수 있게 되었고, 가족의 재결합은 당시 많은 사람들의 소망이었습니다.',
                color: 'from-green-500 to-emerald-600'
              },
              'inventor-ending': {
                title: '발명가의 꿈을 이루다 ✨',
                content: 'Sunday School에서 배운 지식 덕분에 기계에 대한 이해가 깊어졌습니다. 성인이 된 후, 더 안전하고 효율적인 방적기를 개발하여 많은 노동자들의 삶을 개선했습니다.',
                lesson: '교육은 가난한 환경에서도 인생을 바꿀 수 있는 기회였습니다. 실제로 산업혁명 시기에도 일부 노동자들이 교육을 통해 기술자나 발명가가 되었습니다.',
                color: 'from-green-500 to-emerald-600'
              },
              'factory-worker-ending': {
                title: '평생 공장 노동자',
                content: '휴식을 선택한 결과, 교육받을 기회를 놓쳤습니다. 성인이 된 후에도 계속 공장에서 일하며 평생을 보냈습니다.',
                lesson: '당시 대부분의 아동 노동자들은 교육받지 못해 평생 저임금 노동자로 살았습니다. 이는 빈곤의 악순환을 만들었습니다.',
                color: 'from-gray-500 to-gray-600'
              },
              'no-dream-ending': {
                title: '현실의 벽',
                content: '꿈을 포기하고 현실에 집중했습니다. 성실하게 일했지만 승진의 기회는 없었고, 평생 공장 노동자로 살아갔습니다.',
                lesson: '산업혁명 초기에는 사회 계층 이동이 매우 어려웠습니다. 가난한 집안에서 태어난 아이들은 평생 가난에서 벗어나기 힘들었습니다.',
                color: 'from-gray-500 to-slate-600'
              },
              'fired-ending': {
                title: '해고당하다',
                content: '부상을 입은 후 해고당했습니다. 다른 공장도 다친 아이를 고용하지 않았고, 가족은 더 큰 빈곤에 빠졌습니다.',
                lesson: '당시에는 노동자 보호법이 없었습니다. 다친 노동자는 쉽게 해고되었고, 보상도 받지 못했습니다. 이후 노동운동과 법 개정을 통해 노동자의 권리가 점차 보호받게 되었습니다.',
                color: 'from-red-500 to-red-700'
              },
              'begging-ending': {
                title: '거리의 아이',
                content: '거리에서 구걸하며 살았습니다. 겨울에는 추위와 배고픔에 시달렸고, 범죄에 연루될 위험도 높았습니다.',
                lesson: '19세기 런던과 맨체스터의 거리에는 수천 명의 고아와 빈민 아동들이 있었습니다. 많은 아이들이 영양실조와 질병으로 목숨을 잃었습니다.',
                color: 'from-gray-600 to-gray-800'
              },
              'apprentice-ending': {
                title: '도제의 길',
                content: '구두 수선공의 도제가 되었습니다. 힘들었지만 기술을 배워 나중에 독립할 수 있었습니다. 공장보다는 나은 삶을 살게 되었습니다.',
                lesson: '도제 제도는 중세부터 내려온 전통적인 기술 교육 방식이었습니다. 운이 좋으면 좋은 장인을 만나 기술을 배울 수 있었지만, 학대받는 경우도 많았습니다.',
                color: 'from-blue-500 to-blue-700'
              },
              'farm-ending': {
                title: '농촌으로 돌아가다',
                content: '시골 농장에서 일꾼으로 일했습니다. 공장만큼 위험하지는 않았지만, 임금은 더 적었고 가난은 계속되었습니다.',
                lesson: '산업혁명으로 많은 사람들이 도시로 이주했지만, 일부는 농촌으로 돌아가기도 했습니다. 하지만 농촌도 기계화로 인해 일자리가 줄어들고 있었습니다.',
                color: 'from-green-600 to-green-800'
              },
              'servant-ending': {
                title: '하인의 삶',
                content: '부유한 집안의 하인이 되었습니다. 숙식은 제공되었지만 자유가 없었고, 주인 가족의 요구에 항상 응해야 했습니다.',
                lesson: '빅토리아 시대에는 많은 하인들이 있었습니다. 특히 여자 아이들은 가정부나 유모로 일하는 경우가 많았습니다. 대우는 집안마다 달랐습니다.',
                color: 'from-purple-500 to-purple-700'
              },
              'ann-reality-ending': {
                title: '현실의 벽',
                content: '꿈을 포기하고 현실에 집중했습니다. 성실하게 일했지만, 독성 물질인 백린에 너무 오랜 시간 노출된 나머지 극심한 통증에 시달리고, 턱이 괴사되었습니다.',
                lesson: '장시간 독성 물질에 노출되는 것은 심각한 건강 문제를 일으킬 수 있습니다. 역사적 맥락에서 보호 장비와 법적 보호가 얼마나 중요한지 알 수 있습니다.',
                color: 'from-gray-500 to-slate-600'
              }
            };

            // If fired-ending and character is Ann, change description specifically
            if (type === 'fired-ending' && character === 'ann') {
              endings['fired-ending'].content = '부상을 입은 후 해고당했습니다. Ann은 같은 공장에서 일하던 동생과 생이별하게 되었고, 다른 공장도 다친 아이를 고용하지 않았습니다.';
            }

            const ending = endings[type];
            const finalScore = calculateScore();

            return (
              <div className="max-w-2xl mx-auto">
                <div className={`bg-gradient-to-r ${ending.color} text-white p-8 rounded-lg mb-6`}>
                  <h2 className="text-3xl font-bold mb-4 text-center">{ending.title}</h2>
                  <p className="text-lg leading-relaxed mb-4">{ending.content}</p>
                </div>
                
                <div className="bg-blue-50 border-l-4 border-blue-500 p-6 mb-6">
                  <h3 className="font-bold text-blue-900 mb-2">💡 역사적 교훈</h3>
                  <p className="text-blue-800 leading-relaxed">{ending.lesson}</p>
                </div>

                <div className="bg-gradient-to-r from-indigo-50 to-purple-50 p-6 rounded-lg mb-6 border-2 border-indigo-200">
                  <h3 className="font-bold text-indigo-900 mb-4 text-xl text-center">📊 최종 점수</h3>
                  <div className="text-center mb-4">
                    <div className="text-6xl font-bold text-indigo-600">{finalScore}</div>
                    <div className="text-sm text-indigo-700 mt-2">/ 100점</div>
                  </div>
                  <div className="text-xs text-indigo-600 text-center italic">
                    (체력 × 0.3) + (펜스 × 5) + (정신력 × 0.4)
                  </div>
                </div>

                <div className="bg-gray-50 p-6 rounded-lg mb-6">
                  <h3 className="font-bold text-gray-900 mb-3">🎮 게임 통계</h3>
                  <div className="grid grid-cols-2 gap-4">
                    <div>
                      <p className="text-sm text-gray-600">최종 체력</p>
                      <p className="text-2xl font-bold text-gray-900">{stamina}%</p>
                    </div>
                    <div>
                      <p className="text-sm text-gray-600">최종 정신력</p>
                      <p className="text-2xl font-bold text-gray-900">{mentality}%</p>
                    </div>
                    <div>
                      <p className="text-sm text-gray-600">총 수입</p>
                      <p className={`text-2xl font-bold ${money < 0 ? 'text-red-600' : 'text-gray-900'}`}>{money} 펜스</p>
                    </div>
                    </div>
                </div>

                <div className="bg-yellow-50 p-6 rounded-lg mb-6">
                  <h3 className="font-bold text-yellow-900 mb-3">📚 더 알아보기</h3>
                  <p className="text-yellow-800 text-sm leading-relaxed mb-3">
                    산업혁명 시기의 아동 노동 문제는 많은 사회 개혁가들의 노력으로 점차 개선되었습니다.
                  </p>
                  <ul className="text-sm text-yellow-800 space-y-2">
                    <li>• <strong>1833년 공장법:</strong> 9세 미만 아동의 공장 노동 금지</li>
                    <li>• <strong>1842년 광산법:</strong> 여성과 10세 미만 아동의 지하 광산 노동 금지</li>
                    <li>• <strong>1847년 공장법:</strong> 여성과 아동의 하루 노동시간을 10시간으로 제한</li>
                    <li>• <strong>1870년 교육법:</strong> 모든 아동에게 기초 교육 제공</li>
                  </ul>
                </div>

                <button
                  onClick={() => {
                    setGameState('intro');
                    setCharacter(null);
                    setStamina(100);
                    setMentality(100);
                    setMoney(0);
                    setDay(1);
                    setPopup(null);
                  }}
                  className="w-full bg-indigo-600 text-white py-4 rounded-lg hover:bg-indigo-700 transition-colors font-bold text-lg"
                >
                  다시 시작하기
                </button>
              </div>
            );
          };

          return (
            <div className="min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 p-4">
              {popup && <Popup content={popup.content} button={popup.button} onClose={popup.onClose} />}
              <div className="max-w-4xl mx-auto bg-white rounded-xl shadow-2xl p-8 my-8">
                {gameState === 'intro' && renderIntro()}
                {gameState === 'character-select' && renderCharacterSelect()}
                {gameState === 'morning-choice' && renderMorningChoice()}
                {gameState === 'work-speed-choice' && renderWorkSpeedChoice()}
                {gameState === 'injury-scene' && renderInjuryScene()}
                {gameState === 'tom-accident' && renderTomAccident()}
                {gameState === 'mary-accident' && renderMaryAccident()}
                {gameState === 'continue-work-choice' && renderContinueWorkChoice()}
                {gameState === 'lunch-choice' && renderLunchChoice()}
                {gameState === 'afternoon-work' && renderAfternoonWork()}
                {gameState === 'dream-choice' && renderDreamChoice()}
                {gameState === 'sunday-school-choice' && renderSundaySchoolChoice()}
                {gameState === 'quit-choice' && renderQuitChoice()}
                {gameState === 'ann-dizzy' && renderAnnDizzy()}
                {gameState === 'ann-accident' && renderAnnAccident()}
                {gameState.includes('-ending') && renderEnding(gameState)}
              </div>
              
              <div className="max-w-4xl mx-auto mt-4 text-center text-sm text-gray-600">
                <p>이 게임은 교육 목적으로 제작되었습니다.</p>
                <p className="mt-1">산업혁명 시기의 역사적 사실을 바탕으로 구성되었습니다.</p>
              </div>
            </div>
          );
        };

        ReactDOM.render(<IndustrialChildLaborGame />, document.getElementById('root'));
    </script>
</body>
</html>
